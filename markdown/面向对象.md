---
title: ã€ŠFluent Pythonã€‹è¯»ä¹¦ç¬”è®° â€”â€” ç¬¬ä¸‰ç«     é¢å‘å¯¹è±¡æƒ¯ç”¨æ³•
date: 2017-12-11
tags: [python, å¯¹è±¡,åƒåœ¾å›æ”¶,Fluent Python,è¯»ä¹¦ç¬”è®°]
toc: true
mathjax: true
---
# ã€ŠFluent Pythonã€‹è¯»ä¹¦ç¬”è®° â€”â€” ç¬¬ä¸‰ç«  é¢å‘å¯¹è±¡æƒ¯ç”¨æ³•

##  [0.ä¸€ä¸ªéå¸¸å¥½çš„è®²è¿°pythoné­”æ³•æ–¹æ³•çš„web](http://pycoders-weekly-chinese.readthedocs.io/en/latest/issue6/a-guide-to-pythons-magic-methods.html)

## 1.å¯¹è±¡å¼•ç”¨ã€å¯å˜æ€§å’Œåƒåœ¾å›æ”¶

### æ ‡è¯†ã€ç›¸ç­‰æ€§å’Œåˆ«å

id() è¿”å›å¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œåœ¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸­ç»ä¸ä¼šå˜

å®é™…ç¼–ç¨‹ä¸­å¾ˆå°‘ä½¿ç”¨id()æ¥æ£€æŸ¥å¯¹è±¡æ˜¯å¦ç›¸åŒï¼Œä¸€èˆ¬ä½¿ç”¨ is å’Œ ==

```python
åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦ä¸º None çš„æ¨èå†™æ³•ï¼š
>>> x is None
```

is è¿ç®—ç¬¦è¦æ¯” == å¿«ï¼Œå› ä¸ºå®ƒä¸æ”¯æŒé‡è½½ï¼Œæ‰€ä»¥Pythonä¸ç”¨å¯»æ‰¾å¹¶è°ƒç”¨ç‰¹æ®Šæ–¹æ³•ï¼Œè€Œæ˜¯ç›´æ¥æ¯”è¾ƒä¸¤ä¸ªæ•´æ•°idã€‚

è€Œ == æ˜¯è¯­æ³•ç³–ï¼Œå®ƒç­‰æ•ˆäº \_\_eq\_\_() ã€‚ç»§æ‰¿è‡ªobjectçš„\_\_eq\_\_æ–¹æ³•æ˜¯ç›´æ¥æ¯”è¾ƒä¸¤ä¸ªæ•´æ•°IDï¼Œç»“æœä¸isä¸€æ ·ã€‚ä½†æ˜¯å¤šæ•°å†…ç½®ç±»å‹ä½¿ç”¨æ›´æœ‰æ„ä¹‰çš„æ–¹å¼è¦†ç›–äº†\_\_eq\_\_æ–¹æ³•ï¼Œä¼šè€ƒè™‘å±æ€§å¯¹è±¡çš„å€¼ã€‚ä¾‹å¦‚ï¼Œæ¯”è¾ƒå¤§å‹çš„é›†åˆæˆ–åµŒå¥—å±‚çº§è¾ƒæ·±çš„ç»“æ„æ—¶ã€‚

åˆ¤æ–­æ•´æ•°æˆ–è€…å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰æ—¶åªèƒ½ä½¿ç”¨==ï¼Œä½¿ç”¨iså¯èƒ½ä¼šå—Pythonå†…çš„**é©»ç•™**ç‰¹æ€§å½±å“

#### å…ƒç»„çš„ç›¸å¯¹ä¸å¯å˜æ€§

å…ƒç»„ä¿å­˜çš„æ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼Œè™½ç„¶å…ƒç»„æœ¬èº«ä¸å¯å˜ä½†æ˜¯å…ƒç´ ä¾ç„¶å¯å˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå…ƒç»„çš„ä¸å¯å˜æ€§å…¶å®æ˜¯æŒ‡çš„tupleæ•°æ®ç»“æ„çš„ç‰©ç†å†…å®¹ï¼ˆå³ä¿å­˜çš„å¼•ç”¨ï¼‰ä¸å¯å˜ï¼Œä¸å¼•ç”¨çš„å¯¹è±¡æ— å…³ã€‚

```python
>>> t1 = (1, 2, [2, 3])
>>> t2 = (1, 2, [2, 3])
>>> t1 == t2
True
>>> t1[2].append(99)
>>> t1
(1, 2, [2, 3, 99])
>>> t1 == t2
False
```

### æµ…å¤åˆ¶ä¸æ·±å¤åˆ¶

æµ…å¤åˆ¶ï¼šå¤åˆ¶äº†æœ€å¤–å±‚çš„å®¹å™¨ï¼Œå‰¯æœ¬ä¸­çš„å…ƒç´ æ˜¯æºå®¹å™¨ä¸­å…ƒç´ çš„å¼•ç”¨ã€‚å¦‚æœæ‰€æœ‰å…ƒç´ éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œé‚£å°±æ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯å¦‚æœæœ‰å¯å˜çš„å…ƒç´ ï¼Œå¯èƒ½å°±ä¼šå¯¼è‡´æ„æƒ³ä¸åˆ°çš„é—®é¢˜ã€‚

æµ…å¤åˆ¶ä¸»è¦æ–¹æ³•ï¼šcopy.copy(), [:], æ„é€ æ–¹æ³•

```python
>>> r1 = [1, 3, [1, 2]]
>>> r2 = r1[:]
>>> r3 = list(r1)
>>> r4 = copy.copy(r1)
>>> r1[2].append(88)
# æ­¤æ—¶r2,r3,r4å‡å˜æˆäº†[1, 3, [1, 2, 88]]
```

æ·±å¤åˆ¶ï¼šç›¸å¯¹äºæµ…å¤åˆ¶ï¼Œå‰¯æœ¬å†…ä¸å…±äº«å†…éƒ¨å¯¹è±¡çš„å¼•ç”¨ã€‚

copy.deepcopy()

```python
>>> r2 = copy.deepcopy(r1)
>>> r1[2].append(88)
>>> r1
[1, 2, [1, 2, 88]]
>>> r2
[1, 2, [1, 2]]
```

### å‡½æ•°çš„å‚æ•°ä½œä¸ºå¼•ç”¨æ—¶

å‡½æ•°å¯èƒ½ä¼šä¿®æ”¹æ¥å—åˆ°çš„ä»»ä½•å¯å˜å¯¹è±¡

```python
>>> def f(a, b):
...     a += b
...     return a
...
>>> x = [1, 2]
>>> y = [3, 4]
>>> f(x, y)
[1, 2, 3, 4]
>>> x
[1, 2, 3, 4]
>>> y
[3, 4]
```

**ä¸è¦ä½¿ç”¨å¯å˜ç±»å‹ä½œä¸ºå‚æ•°çš„é»˜è®¤å€¼**

é»˜è®¤å€¼åœ¨å®šä¹‰å‡½æ•°çš„æ—¶å€™è®¡ç®—ï¼ˆé€šå¸¸åœ¨åŠ è½½æ¨¡å—æ—¶ï¼‰ï¼Œå› æ­¤é»˜è®¤å€¼å˜æˆäº†å‡½æ•°å¯¹è±¡çš„å±æ€§ã€‚å› æ­¤ï¼Œå¦‚æœé»˜è®¤å€¼æ˜¯å¯å˜å¯¹è±¡ï¼Œè€Œä¸”ä¿®æ”¹äº†å®ƒçš„å€¼ï¼Œé‚£ä¹ˆåç»­çš„å‡½æ•°è°ƒç”¨éƒ½ä¼šå—åˆ°å½±å“ã€‚

```python
class HauntedBus:
    """A bus model haunted by ghost passengers"""

    def __init__(self, passengers=[]):  # <1>
        self.passengers = passengers  # <2>

    def pick(self, name):
        self.passengers.append(name)  # <3>

    def drop(self, name):
        self.passengers.remove(name)

        
>>> bus1 = HauntedBus(['Alice', 'Bill'])
>>> bus1.passengers
['Alice', 'Bill']
>>> bus1.pick('Charlie')
>>> bus1.drop('Alice')
>>> bus1.passengers
['Bill', 'Charlie']
>>> bus2 = HauntedBus()
>>> bus2.pick('Carrie')
>>> bus2.passengers
['Carrie']
>>> bus3 = HauntedBus()
>>> bus3.passengers
['Carrie']
>>> bus3.pick('Dave')
>>> bus2.passengers
['Carrie', 'Dave']
>>> bus2.passengers is bus3.passengers
True
>>> bus1.passengers
['Bill', 'Charlie']
>>> dir(HauntedBus.__init__)
['__annotations__', '__call__', ..., '__defaults__', ...]
>>> HauntedBus.__init__.__defaults__ # é»˜è®¤å€¼æ˜¯å‡½æ•°çš„ä¸€ä¸ªå›ºæœ‰å±æ€§ä¹‹ä¸€
(['Carrie', 'Dave'],)
```

é˜²å¾¡å¯å˜å‚æ•°ï¼Œå¦‚æœå®šä¹‰çš„å‡½æ•°æ¥å—å¯å˜å‚æ•°ï¼Œåº”è¯¥è°¨æ…è€ƒè™‘è°ƒç”¨æ–¹æ˜¯å¦æœŸæœ›ä¿®æ”¹ä¼ å…¥çš„å‚æ•°.

ä¸‹æ–¹ç¤ºä¾‹ä»£ç å±•ç¤ºäº†å¦‚ä½•è§£å†³è¯¥é—®é¢˜ã€‚

```python
def __init__(self, passengers=None):
    if passengers is None:
        self.passengers = []
    else:
        self.passengers = list(passengers)
```



### delå’Œåƒåœ¾å›æ”¶

delè¯­å¥åˆ é™¤åç§°ï¼Œè€Œä¸æ˜¯å¯¹è±¡ã€‚delå‘½ä»¤å¯èƒ½ä¼šå¯¼è‡´å¯¹è±¡å½“ä½œåƒåœ¾è¢«å›æ”¶ï¼Œä½†æ˜¯ä»…å½“åˆ é™¤çš„å˜é‡ä¿å­˜çš„æ˜¯å¯¹è±¡çš„æœ€åä¸€ä¸ªå¼•ç”¨ï¼Œæˆ–è€…æ— æ³•å¾—åˆ°å¯¹è±¡æ—¶ã€‚

å¯ä»¥ä½¿ç”¨ weakref.finalize æ³¨å†Œä¸€ä¸ªå›æ‰å‡½æ•°ï¼Œåœ¨é”€æ¯å¯¹è±¡æ—¶è°ƒç”¨ã€‚

```python
>>> import weakref
>>> s1 = {1, 2, 3}
>>> s2= s1
>>> def bye():
...     print('Bye bye!')
>>> ender = weakref.finalize(s1, bye)
>>> ender.alive
True
>>> del s1
>>> ender.alive
True
>>> s2 = 'Spam...'
Bye bye!
>>> ender.alive
False
```

å¼±å¼•ç”¨ï¼šå¼±å¼•ç”¨ä¸ä¼šå¢åŠ å¯¹è±¡çš„å¼•ç”¨æ•°é‡ã€‚å¼•ç”¨çš„ç›®æ ‡å¯¹è±¡ç§°ä¸ºæ‰€æŒ‡å¯¹è±¡ã€‚å› æ­¤æˆ‘ä»¬è¯´ï¼Œå¼±å¼•ç”¨ä¸ä¼šå¦¨ç¢å¯¹è±¡è¢«å½“ä½œåƒåœ¾å›æ”¶ã€‚

weakrefæ¨¡å—ä¸­çš„å®ä¾‹ WeakKeyDictonary, WeakValueDictonary, WeakSet å‡æ˜¯åŒ…å«çš„å¯¹è±¡çš„å¼±å¼•ç”¨ï¼Œå½“å…¶ä¸­è¢«å¼•ç”¨çš„å¯¹è±¡åœ¨ç¨‹åºçš„å…¶ä»–åœ°æ–¹è¢«å½“ä½œåƒåœ¾å›æ”¶åï¼Œå¯¹åº”çš„å€¼ä¼šè‡ªåŠ¨ä»ä¸Šè¿°å¯¹è±¡ä¸­åˆ é™¤ã€‚å¦åˆ™å¦‚æœä¸ä½¿ç”¨WeakSetè€Œä½¿ç”¨setç­‰å†…ç½®ç±»å‹ï¼Œåˆ™å®ä¾‹æ°¸è¿œä¸ä¼šè¢«åƒåœ¾å›æ”¶ã€‚

## 2.ç¬¦åˆPythoné£æ ¼çš„å¯¹è±¡

### å¯¹è±¡è¡¨ç¤ºå½¢å¼

repr() ä»¥ä¾¿äº**å¼€å‘è€…**ç†è§£çš„å‘ç”Ÿè¿”å›å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ï¼Œå¯¹åº”çš„æ˜¯\_\_repr\_\_ç‰¹æ®Šæ–¹æ³•

str() ä»¥ä¾¿äº**ç”¨æˆ·**ç†è§£çš„å‘ç”Ÿè¿”å›å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ï¼Œå¯¹åº”çš„æ˜¯\_\_str\_\_ç‰¹æ®Šæ–¹æ³•

ï¼å½“Pythonè°ƒç”¨ \_\_str\_\_ æ–¹æ³•ä¸å­˜åœ¨æ—¶ä¼šè°ƒç”¨ \_\_repr\_\_ æ–¹æ³•

ï¼å½“printå¯¹è±¡æ—¶ï¼Œä¼šè°ƒç”¨å¯¹è±¡çš„ \_\_repr\_\_ æ–¹æ³•

```python
from array import array
import math

class Vector2d:
    typecode = 'd'

    def __init__(self, x, y):
        self.x = float(x) 
        self.y = float(y)

    def __iter__(self):
        return (i for i in (self.x, self.y))

    def __repr__(self):
        class_name = type(self).__name__
        return '{}({!r}, {!r})'.format(class_name, *self)

    def __str__(self):
        return str(tuple(self))

    def __bytes__(self):
        return (bytes([ord(self.typecode)]) +
                bytes(array(self.typecode, self)))

    def __eq__(self, other):
        return tuple(self) == tuple(other)

    def __abs__(self):
        return math.hypot(self.x, self.y)

    def __bool__(self):
        return bool(abs(self))
   
>>> v1 = Vector2d(3, 4)
>>> print(v1.x, v1.y)
3.0 4.0
>>> x, y = v1
>>> x, y
(3.0, 4.0)
>>> v1
Vector2d(3.0, 4.0)
>>> v1_clone = eval(repr(v1))
>>> v1 == v1_clone
True
>>> print(v1)
(3.0, 4.0)
>>> octets = bytes(v1)
>>> octets
b'd\\x00\\x00\\x00\\x00\\x00\\x00\\x08@\\x00\\x00\\x00\\x00\\x00\\x00\\x10@'
>>> abs(v1)
5.0
>>> bool(v1), bool(Vector2d(0, 0))
(True, False)
```



### classmethodå’Œstaticmethod

@classmethod ï¼Œå®šä¹‰æ“ä½œç±»ï¼Œè€Œä¸æ˜¯æ“ä½œå®ä¾‹çš„æ–¹æ³•ã€‚å…¶æ”¹å˜äº†è°ƒç”¨æ–¹æ³•çš„æ–¹å¼ï¼Œå› æ­¤ç±»æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»æœ¬èº«ï¼Œè€Œä¸æ˜¯å®ä¾‹ã€‚classmethodæœ€å¸¸è§çš„ç”¨é€”æ˜¯å®šä¹‰å¤‡é€‰æ„é€ æ–¹æ³•ï¼Œå¦‚ä¸‹æ–¹æ‰€ç¤ºã€‚

```python
@classmethod 
def frombytes(cls, octets): 
    typecode = chr(octets[0]) 
    memv = memoryview(octets[1:]).cast(typecode)
    return cls(*memv)
```

staticmethod è£…é¥°å™¨ä¹Ÿä¼šæ”¹å˜æ–¹æ³•çš„è°ƒç”¨æ–¹å¼ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ä¸åƒæ™®é€šçš„ç±»æ–¹æ³•å’Œclassmethodæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å€¼ã€‚å…¶å®ï¼Œé™æ€æ–¹æ³•å°±æ˜¯æ™®é€šçš„å‡½æ•°ï¼Œåªä¸è¿‡ç¢°å·§åœ¨ç±»çš„å®šä¹‰ä½“ä¸­ï¼Œè€Œä¸æ˜¯åœ¨æ¨¡å—å±‚å®šä¹‰ã€‚

ä¸‹æ–¹æ¯”è¾ƒäº†æ™®é€šçš„ç±»æ–¹æ³•ã€classmethodå’Œstaticmethodçš„è¡Œä¸º

```python
>>> class Demo:
...     @classmethod
...     def klassmeth(*args):
...             return args
...     @staticmethod
...     def statmeth(*args):
...             return args
...     def meth(*args):
...             return args
...
>>> Demo.klassmeth()
(<class '__main__.Demo'>,)
>>> Demo.statmeth()
()
>>> Demo.meth()
()
>>> a = Demo()
>>> a.meth()
(<__main__.Demo object at 0x10c4f3ba8>,)
>>> a.klassmeth()
(<class '__main__.Demo'>,)
```

### å®ç°å¯æ•£åˆ—å¯¹è±¡

1. å®ç°\_\_hash\_\_æ–¹æ³•ï¼Œä¿è¯ç›¸åŒçš„å¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•ä¼šæœ‰ç›¸åŒçš„å€¼ï¼Œä¸åŒçš„å¯¹è±¡ä¼šæœ‰ä¸åŒçš„å€¼ã€‚
2. å®ç°\_\_eq\_\_æ–¹æ³•

### Pythonçš„ç§æœ‰å±æ€§

å¦‚æœä»¥\_\_modæ–¹å¼ï¼ˆä¸¤ä¸ªå‰å¯¼ä¸‹åˆ’çº¿ï¼Œå°¾éƒ¨æ²¡æœ‰æˆ–è€…æœ€å¤šæœ‰ä¸€ä¸ªä¸‹åˆ’çº¿ï¼‰å‘½åå®ä¾‹å±æ€§ï¼ŒPythonä¼šæŠŠå±æ€§åå­˜å…¥å®ä¾‹çš„\_\_dict\_\_å±æ€§ä¸­ï¼Œè€Œä¸”åœ¨å‰é¢ä¼šåŠ ä¸Šä¸€ä¸ªä¸‹åˆ’çº¿å’Œç±»å

```python
>>> class Dog:
...     def __init__(self):
...             self.__f = 1
...
>>> d = Dog()
>>> d.__dict__
{'_Dog__f': 1}
```

### ä½¿ç”¨\_\_slots\_\_ç±»å±æ€§èŠ‚çœç©ºé—´

é»˜è®¤æƒ…å†µä¸‹ï¼ŒPythonåœ¨å„ä¸ªå®ä¾‹ä¸­åä¸º\_\_dict\_\_çš„å­—å…¸å­˜å‚¨å®ä¾‹å±æ€§ã€‚ä¸ºäº†ä½¿ç”¨åº•å±‚çš„æ•£åˆ—è¡¨æå‡é€Ÿåº¦ï¼Œå­—å…¸ä¼šæ¶ˆè€—å¤§é‡å†…å­˜ã€‚è‹¥æœè¦å¤„ç†æ•°ç™¾ä¸‡ä¸ªå±æ€§ä¸å¤šçš„å®ä¾‹ï¼Œé€šè¿‡\_\_slots\_\_ç±»å±æ€§ï¼Œèƒ½èŠ‚çœå¤§é‡å†…å­˜ï¼Œæ–¹æ³•æ˜¯è®©è§£é‡Šå™¨åœ¨å…ƒç»„ä¸­å­˜å‚¨å®ä¾‹å±æ€§ï¼Œè€Œä¸ç”¨å­—å…¸ã€‚

ï¼ç»§æ‰¿è‡ªè¶…ç±»çš„\_\_slot\_\_å±æ€§æ²¡æœ‰æ•ˆæœï¼ŒPythonåªä¼šä½¿ç”¨åœ¨å„ä¸ªç±»ä¸­å®šä¹‰çš„\_\_slots\_\_å±æ€§ã€‚

ï¼ä½¿ç”¨è¯¥å±æ€§ä¼šç¦æ­¢ç±»çš„ç”¨æˆ·æ–°å¢å®ä¾‹å±æ€§

```python
class Vector2d:
    __slots__ = ('__x', '__y')
```

## 3.åºåˆ—çš„ä¿®æ”¹ã€æ•£åˆ—å’Œåˆ‡ç‰‡

### é¸­å­ç±»å‹

**é¸­å­ç±»å‹**ï¼ˆè‹±è¯­ï¼š**duck typing**ï¼‰æ˜¯åŠ¨æ€ç±»å‹çš„ä¸€ç§é£æ ¼ã€‚åœ¨è¿™ç§é£æ ¼ä¸­ï¼Œä¸€ä¸ªå¯¹è±¡æœ‰æ•ˆçš„è¯­ä¹‰ï¼Œä¸æ˜¯ç”±ç»§æ‰¿è‡ªç‰¹å®šçš„ç±»æˆ–å®ç°ç‰¹å®šçš„æ¥å£ï¼Œè€Œæ˜¯ç”±"å½“å‰æ–¹æ³•å’Œå±æ€§çš„é›†åˆ"å†³å®šã€‚

åœ¨é¸­å­ç±»å‹ä¸­ï¼Œå…³æ³¨çš„ä¸æ˜¯å¯¹è±¡çš„ç±»å‹æœ¬èº«ï¼Œè€Œæ˜¯å®ƒæ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸ä½¿ç”¨é¸­å­ç±»å‹çš„è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªç±»å‹ä¸º"é¸­å­"çš„å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å®ƒçš„"èµ°"å’Œ"å«"æ–¹æ³•ã€‚åœ¨ä½¿ç”¨é¸­å­ç±»å‹çš„è¯­è¨€ä¸­ï¼Œè¿™æ ·çš„ä¸€ä¸ªå‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªä»»æ„ç±»å‹çš„å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å®ƒçš„"èµ°"å’Œ"å«"æ–¹æ³•ã€‚å¦‚æœè¿™äº›éœ€è¦è¢«è°ƒç”¨çš„æ–¹æ³•ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°†å¼•å‘ä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯ã€‚ä»»ä½•æ‹¥æœ‰è¿™æ ·çš„æ­£ç¡®çš„"èµ°"å’Œ"å«"æ–¹æ³•çš„å¯¹è±¡éƒ½å¯è¢«å‡½æ•°æ¥å—çš„è¿™ç§è¡Œä¸ºå¼•å‡ºäº†ä»¥ä¸Šè¡¨è¿°ï¼Œè¿™ç§å†³å®šç±»å‹çš„æ–¹å¼å› æ­¤å¾—åã€‚

### å¯åˆ‡ç‰‡çš„åºåˆ—

å®ç°ä¸å¯å˜å®¹å™¨ï¼Œä½ åªèƒ½å®šä¹‰ `__len__` å’Œ `__getitem__` (ä¸€ä¼šä¼šè®²æ›´å¤š)ã€‚å¯å˜å®¹å™¨åè®®åˆ™éœ€è¦æ‰€æœ‰ä¸å¯å˜å®¹å™¨çš„æ‰€æœ‰å¦å¤–è¿˜éœ€è¦ `__setitem__` å’Œ `__delitem__` ã€‚æœ€ç»ˆï¼Œå¦‚æœä½ å¸Œæœ›ä½ çš„å¯¹è±¡æ˜¯å¯è¿­ä»£çš„è¯ï¼Œä½ éœ€è¦å®šä¹‰ `__iter__` ä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚è¿­ä»£å™¨å¿…é¡»éµå¾ªè¿­ä»£å™¨åè®®ï¼Œéœ€è¦æœ‰ `__iter__` (è¿”å›å®ƒæœ¬èº«) å’Œ `__next__` ã€‚

### åŠ¨æ€å­˜å–å±æ€§

å¯¹äºmy_obj.xè¡¨è¾¾å¼ï¼ŒPythonä¼šæ£€æŸ¥my_objå®ä¾‹æœ‰æ²¡æœ‰åä¸ºxçš„å±æ€§ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ°ç±»(my_obj.\_\_class\_\_)ä¸­æŸ¥æ‰¾ï¼›å¦‚æœè¿˜æ²¡æœ‰å°±é¡ºç€ç»§æ‰¿æ ‘ç»§ç»­æŸ¥æ‰¾ï¼›å¦‚æœä¾æ—§æ‰¾ä¸åˆ°ï¼Œè°ƒç”¨my_objæ‰€å±ç±»ä¸­å®šä¹‰çš„\_\_getattr\_\_æ–¹æ³•ã€‚

ä¸€èˆ¬\_\_getattr\_\_æ–¹æ³•ä¸\_\_setattr\_\_æ–¹æ³•éœ€è¦é…å¥—ä½¿ç”¨

```python
>>>ã€€classã€€Class1:
ã€€ã€€defã€€__getattr__(self,ã€€name):
ã€€ã€€ã€€ã€€printã€€"__getattr__"
ã€€ã€€ã€€ã€€returnã€€None
ã€€ã€€defã€€__setattr__(self,ã€€name,ã€€value):
ã€€ã€€ã€€ã€€printã€€"__setattr__"
ã€€ã€€ã€€ã€€self.__dict__[name]ã€€=ã€€value
ã€€ã€€ã€€ã€€
>>>ã€€aã€€=ã€€Class1()
>>>ã€€a.x
__getattr__
>>>ã€€a.xã€€=ã€€123
__setattr__
>>>ã€€a.x
123
```

ä¸€ä¸ªä¼˜é›…çš„getattrå®ä¾‹åº”ç”¨

```python
class UrlGenerator(object):
    def __init__(self, root_url):
        self.url = root_url

    def __getattr__(self, item):
        if item == 'get' or item == 'post':
            print self.url
        return UrlGenerator('{}/{}'.format(self.url, item))


>>> url_gen = UrlGenerator('http://xxxx')
>>> url_gen.users.show.get

>>> http://xxxx/users/show
```

åœ¨è¿›è¡Œå±æ€§è®¿é—®æ§åˆ¶å®šä¹‰çš„æ—¶å€™ä½ å¯èƒ½ä¼šå¾ˆå®¹æ˜“çš„å¼•èµ·ä¸€ä¸ªé”™è¯¯ã€‚è€ƒè™‘ä¸‹é¢çš„ä¾‹å­ã€‚

```python
def __setattr__(self, name, value):
    self.name = value
    #æ¯å½“å±æ€§è¢«èµ‹å€¼çš„æ—¶å€™ï¼Œ ``__setattr__()`` ä¼šè¢«è°ƒç”¨ï¼Œè¿™æ ·å°±é€ æˆäº†é€’å½’è°ƒç”¨ã€‚
    #è¿™æ„å‘³è¿™ä¼šè°ƒç”¨ ``self.__setattr__('name', value)`` ï¼Œæ¯æ¬¡æ–¹æ³•ä¼šè°ƒç”¨è‡ªå·±ã€‚è¿™æ ·ä¼šé€ æˆç¨‹åºå´©æºƒã€‚

def __setattr__(self, name, value):
    self.__dict__[name] = value  #ç»™ç±»ä¸­çš„å±æ€§ååˆ†é…å€¼
    #å®šåˆ¶ç‰¹æœ‰å±æ€§
```



### åˆ©ç”¨ä¸Šè¿°æŠ€æœ¯ç¼–å†™å‡ºæ¥çš„ä¸€ä¸ªå®Œæ•´çš„Vectorç±»

```python
from array import array
import math

class Vector2d:
    typecode = 'd'

    def __init__(self, x, y):
        self.__x = float(x)
        self.__y = float(y)

    @property
    def x(self):
        return self.__x

    @property
    def y(self):
        return self.__y

    def __iter__(self):
        return (i for i in (self.x, self.y))

    def __repr__(self):
        class_name = type(self).__name__
        return '{}({!r}, {!r})'.format(class_name, *self)

    def __str__(self):
        return str(tuple(self))

    def __bytes__(self):
        return (bytes([ord(self.typecode)]) +
                bytes(array(self.typecode, self)))

    def __eq__(self, other):
        return tuple(self) == tuple(other)

    def __hash__(self):
        return hash(self.x) ^ hash(self.y)

    def __abs__(self):
        return math.hypot(self.x, self.y)

    def __bool__(self):
        return bool(abs(self))

    def angle(self):
        return math.atan2(self.y, self.x)

    def __format__(self, fmt_spec=''):
        if fmt_spec.endswith('p'):
            fmt_spec = fmt_spec[:-1]
            coords = (abs(self), self.angle())
            outer_fmt = '<{}, {}>'
        else:
            coords = self
            outer_fmt = '({}, {})'
        components = (format(c, fmt_spec) for c in coords)
        return outer_fmt.format(*components)

    @classmethod
    def frombytes(cls, octets):
        typecode = chr(octets[0])
        memv = memoryview(octets[1:]).cast(typecode)
        return cls(*memv)
```



## 4.æ¥å£ï¼šä»åè®®åˆ°æŠ½è±¡åŸºç±»

ç™½é¹…ç±»å‹ï¼šå…³æ³¨å…¶å®ä¾‹çš„å®è´¨ï¼Œç­¾åå’Œè¯­ä¹‰ã€‚åªè¦clsæ˜¯æŠ½è±¡åŸºç±»ï¼Œå³clsçš„å…ƒç±»æ˜¯abc.ABCMetaï¼Œå°±å¯ä»¥ä½¿ç”¨isinstance(obj, cls)ã€‚ç›¸å¯¹äºé¸­å­ç±»å‹æ¥è¯´ï¼Œå®ç°äº†æ‰€éœ€çš„æ–¹æ³•å¹¶ä¸ä¸€å®šèƒ½å¤Ÿä»£è¡¨å…¶æœ¬è´¨æ˜¯ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚çš„ã€‚

é¸­å­ç±»å‹ï¼šå…³æ³¨å…¶å®ä¾‹æœ‰æ— å®ç°æ‰€éœ€çš„æ–¹æ³•ã€‚

### çŒ´å­è¡¥ä¸

åœ¨è¿è¡Œæ—¶ä¿®æ”¹ç±»æˆ–æ¨¡å—ï¼Œè€Œä¸è¯¥åŠ¨æºç ã€‚çŒ´å­è¡¥ä¸å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯æ‰“è¡¥ä¸çš„ä»£ç è¦ä¸æ‰“è¡¥ä¸çš„ç¨‹åºè€¦åˆå¾—ååˆ†ç´§å¯†ï¼Œè€Œä¸”è¦å¾€å¾€å¤„ç†éšè—å’Œæ²¡æœ‰æ–‡æ¡£çš„éƒ¨åˆ†ã€‚

è¿™ä¹Ÿè¡¨æ˜Pythonå†…çš„åè®®æ˜¯åŠ¨æ€çš„ã€‚

å¦‚FrenchDeckåªæ˜¯å®ç°äº†ä¸å¯å˜çš„åºåˆ—åè®®ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨random.shuffleæ–¹æ³•ï¼Œéœ€è¦å®ç°å¯å˜åºåˆ—åè®®ï¼Œå¯å˜çš„åºåˆ—è¿˜è¦æä¾›\_\_setitem\_\_æ–¹æ³•

```python
def set_card(deck, position, card):
    deck._cards[position] = card
>>> FrenchDeck._cards[position] = set_card
>>> shuffle(deck)
```



### å®šä¹‰æŠ½è±¡åŸºç±»çš„å­ç±»

è¡¨ç¤ºå¯å˜åºåˆ—çš„æŠ½è±¡åŸºç±»MutableSequenceï¼Œæœ‰\_\_setitem\_\_,\_\_delitem\_\_,insertä¸‰ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨å®šä¹‰å…¶å­ç±»æ—¶å¿…é¡»è¦å°†è¿™äº›æ–¹æ³•å®ç°ã€‚å…¶ä»–æ–¹æ³•å¦‚\_\_contians\_\_,appendç­‰æˆ‘ä»¬å¯ä»¥ç›´æ¥å€Ÿç”¨åŸºç±»çš„å®ç°ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥ä»¥æ›´é«˜æ•ˆçš„æ–¹æ³•é‡æ–°å®ç°å®ƒä»¬ã€‚

```python
import collections

Card = collections.namedtuple('Card', ['rank', 'suit'])

class FrenchDeck2(collections.MutableSequence):
    ranks = [str(n) for n in range(2, 11)] + list('JQKA')
    suits = 'spades diamonds clubs hearts'.split()

    def __init__(self):
        self._cards = [Card(rank, suit) for suit in self.suits
                                        for rank in self.ranks]

    def __len__(self):
        return len(self._cards)

    def __getitem__(self, position):
        return self._cards[position]

    def __setitem__(self, position, value):
        self._cards[position] = value

    def __delitem__(self, position):
        del self._cards[position]

    def insert(self, position, value):
        self._cards.insert(position, value)
```
### æ ‡å‡†åº“ä¸­çš„æŠ½è±¡åŸºç±»
#### collections.abc
![1A8CCAE7-C938-4377-B7A5-2E6AD33F9F2C.png](https://i.loli.net/2017/12/12/5a2f48f085b45.png)



#### æŠ½è±¡åŸºç±»çš„æ•°å­—æ–¹æ³•

numbersåŒ…å®šä¹‰çš„â€œæ•°å­—å¡”â€ï¼Œå…¶ä¸­Numberæ˜¯ä½äºæœ€é¡¶ç«¯çš„åŸºç±»ï¼Œä¾æ¬¡å¾€ä¸‹ï¼Œæœ€ä½ç«¯çš„æ˜¯Integralç±»

* Numer
* Complex
* Real
* Rational
* Integral

å› æ­¤ï¼Œå¦‚æœæƒ³æ£€æŸ¥ä¸€ä¸ªæ•°æ˜¯ä¸æ˜¯æ•´æ•°ï¼Œå¯ä»¥ä½¿ç”¨isinstance(x, numbers.Integral)ï¼Œè¿™æ ·ä»£ç å°±èƒ½å¤Ÿæ¥å—intï¼Œ boolï¼Œæˆ–è€…å¤–éƒ¨åº“ä½¿ç”¨numbersæŠ½è±¡åŸºç±»æ³¨å†Œçš„å…¶ä»–ç±»å‹ã€‚

### å®šä¹‰ä¸€ä¸ªæŠ½è±¡åŸºç±»

* è‡ªå·±å®šä¹‰çš„æŠ½è±¡åŸºç±»è¦ç»§æ‰¿abc.ABC
* æŠ½è±¡æ–¹æ³•ä½¿ç”¨@abc.abstractmethodè£…é¥°å™¨æ ‡è®°ï¼Œè€Œä¸”å®šä¹‰ä¸­é€šå¸¸åªæœ‰æ–‡æ¡£å­—ç¬¦ä¸²
* æŠ½è±¡åŸºç±»å¯ä»¥åŒ…å«å…·ä½“æ–¹æ³•ã€‚å³ä½¿å®ç°äº†ï¼Œå­ç±»ä¹Ÿå¿…é¡»è¦†ç›–æŠ½è±¡æ–¹æ³•ï¼Œä½†æ˜¯åœ¨å­ç±»ä¸­å¯ä»¥ä½¿ç”¨super() å‡½æ•°è°ƒç”¨æŠ½è±¡æ–¹æ³•ï¼Œä¸ºå®ƒæ·»åŠ åŠŸèƒ½è€Œä¸æ˜¯ä»å¤´å®ç°ã€‚

```python
import abc

class Tombola(abc.ABC):

    @abc.abstractmethod
    def load(self, iterable):
        """Add items from an iterable."""

    @abc.abstractmethod
    def pick(self):
        """Remove item at random, returning it.
        This method should raise `LookupError` when the instance is empty.
        """

    def loaded(self): 
        """Return `True` if there's at least 1 item, `False` otherwise."""
        return bool(self.inspect())


    def inspect(self):
        """Return a sorted tuple with the items currently inside."""
        items = []
        while True:
            try:
                items.append(self.pick())
            except LookupError:
                break
        self.load(items)
        return tuple(sorted(items))
```



#### ä½¿ç”¨è‡ªå·±çš„æŠ½è±¡åŸºç±»

```python
import random

from tombola import Tombola


class BingoCage(Tombola):

    def __init__(self, items):
        self._randomizer = random.SystemRandom()
        self._items = []
        self.load(items)

    def load(self, items):
        self._items.extend(items)
        self._randomizer.shuffle(self._items)

    def pick(self):
        try:
            return self._items.pop()
        except IndexError:
            raise LookupError('pick from empty BingoCage')

    def __call__(self):
        self.pick()
```



## 5.ç»§æ‰¿

å†…ç½®ç±»å‹ï¼ˆä½¿ç”¨Cè¯­è¨€ç¼–å†™ï¼‰ä¸ä¼šè°ƒç”¨ç”¨æˆ·å®šä¹‰çš„ç±»è¦†ç›–çš„ç‰¹æ®Šæ–¹æ³•ã€‚

åŸºæœ¬ä¸Šï¼Œå†…ç½®ç±»å‹çš„æ–¹æ³•ä¸ä¼šè°ƒç”¨å­ç±»è¦†ç›–çš„æ–¹æ³•ï¼Œå¦‚ä¸‹æ–¹ä»£ç æ‰€ç¤ºï¼Œå†…ç½®ç±»å‹dictçš„\_\_init\_\_å’Œ_\_update\_\_æ–¹æ³•ä¼šå¿½ç•¥æˆ‘ä»¬è¦†ç›–çš„\_\_setitem\_\_æ–¹æ³•ã€‚

```python
>>> class DemoDict(dict):
...     def __setitem__(self, key, value):
...             super().__setitem__(key, [value] * 2)
...
>>> dd = DemoDict(one=1)
>>> dd
{'one': 1}
>>> dd['two'] = 2
>>> dd
{'one': 1, 'two': [2, 2]}
>>> dd.update(three=3)
>>> dd
{'one': 1, 'two': [2, 2], 'three': 3}
```



### å¤šé‡ç»§æ‰¿å’Œæ–¹æ³•è§£æé¡ºåº

è¿™ä¸ªé¡ºåºå«åšMRO(Method Resolution Order)

æœ‰ä¸¤ç§MROçš„æ–¹æ³•
1. å¦‚æœæ˜¯ç»å…¸ç±»MROä¸ºDFSï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆå­èŠ‚ç‚¹é¡ºåºï¼šä»å·¦åˆ°å³ï¼‰ï¼‰ã€‚
2. å¦‚æœæ˜¯**æ–°å¼ç±»**MROä¸ºBFSï¼ˆå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆå­èŠ‚ç‚¹é¡ºåºï¼šä»å·¦åˆ°å³ï¼‰ï¼‰ã€‚

[![4D3F140B-E27C-4F1B-8149-B1E057459503.png](https://i.loli.net/2017/12/12/5a2f7e5d9cce3.png)](https://i.loli.net/2017/12/12/5a2f7e5d9cce3.png)

å¦‚æœæƒ³æŠŠæ–¹æ³•è°ƒç”¨å§”æ‰˜ç»™è¶…ç±»ï¼Œæ¨èçš„æ–¹å¼æ˜¯ä½¿ç”¨super()å‡½æ•°ï¼Œå…¶ä¼šéµå®ˆæ–¹æ³•è§£æé¡ºåºï¼Œæ›´åŠ å®‰å…¨å’Œæ–¹ä¾¿ã€‚

```python
class A:
    def ping(self):
        print('ping:', self)

class B(A):
    def pong(self):
        print('pong:', self)

class C(A):
    def pong(self):
        print('PONG:', self)

class D(B, C):

    def ping(self):
        super().ping()
        print('post-ping:', self)

    def pingpong(self):
        self.ping()
        super().ping()
        self.pong()
        super().pong()
        C.pong(self)

>>> d = D()
>>> d.ping()
ping: <__main__.D object at 0x10984c860>
post-ping: <__main__.D object at 0x10984c860>
>>> d.pingpong()
ping: <__main__.D object at 0x10984c860>
post-ping: <__main__.D object at 0x10984c860>
ping: <__main__.D object at 0x10984c860>
pong: <__main__.D object at 0x10984c860>
pong: <__main__.D object at 0x10984c860>
PONG: <__main__.D object at 0x10984c860>
```

æƒ³æŸ¥çœ‹è¯¥ç±»çš„æ–¹æ³•è§£æé¡ºåºå¯ä»¥è°ƒç”¨\_\_mro\_\_æ–¹æ³•ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªå…ƒç»„ï¼ŒæŒ‰ç…§MROåˆ—å‡ºå„ä¸ªè¶…ç±»

```python
>>> D.__mro__
(<class '__main__.D'>, <class '__main__.B'>, <class '__main__.C'>, <class '__main__.A'>, <class 'object'>)
```

å½“ç„¶ï¼Œæœ‰æ—¶éœ€è¦ç»•è¿‡æ–¹æ³•è§£æé¡ºåºï¼Œç›´æ¥è°ƒç”¨æŸä¸ªè¶…ç±»çš„æ–¹æ³•ã€‚æ³¨æ„ï¼Œç›´æ¥åœ¨ç±»ä¸Šè°ƒç”¨å®ä¾‹æ–¹æ³•æ—¶ï¼Œå¿…é¡»æ˜¾ç¤ºä¼ å…¥selfå‚æ•°ï¼Œå› ä¸ºè¿™æ ·è®¿é—®çš„æ˜¯æœªç»‘å®šæ–¹æ³•ã€‚

```python
def ping(self):
	A.ping(self) #å¿…é¡»æ˜¾ç¤ºä¼ å…¥selfå‚æ•°
	print("post-ping:", self)
```



## 6.é‡è½½è¿ç®—ç¬¦

### é‡è½½äºŒå…ƒè¿ç®—ç¬¦

å¯¹äºa + bæ¥è¯´ï¼Œè§£é‡Šå™¨ä¼šæ‰§è¡Œä»¥ä¸‹å‡ æ­¥æ“ä½œ

1. å¦‚æœaæœ‰\_\_add\_\_æ–¹æ³•ï¼Œè€Œä¸”è¿”å›å€¼ä¸æ˜¯NotImplementedï¼Œè°ƒç”¨a.\_\_add\_\_(b)ï¼Œç„¶åè¿”å›ç»“æœ

2. å¦‚æœaæ²¡æœ‰\_\_add\_\_æ–¹æ³•æˆ–è€…è¿”å›NotImplementedï¼Œæ£€æŸ¥bæœ‰æ²¡æœ‰\_\_radd\_\_æ–¹æ³•ï¼Œå¦‚æœæœ‰ä¸”æ²¡æœ‰è¿”å›NotImplementedï¼Œè°ƒç”¨b.\_\_radd\_\_(a)ï¼Œç„¶åè¿”å›ç»“æœ

3. å¦‚æœbä¹Ÿæ²¡æœ‰\_\_radd\_\_æ–¹æ³•æˆ–è€…è¿”å›NotImplementedï¼Œåˆ™æŠ›å‡ºTypeError

[![23CF90C2-1BDA-4F5B-930F-2AB515396DBC.png](https://i.loli.net/2017/12/12/5a2f8c5ecc090.png)](https://i.loli.net/2017/12/12/5a2f8c5ecc090.png)

NotImplementedæ˜¯ç‰¹æ®Šçš„å•ä¾‹å€¼ï¼Œç”±äºç±»å‹ä¸å…¼å®¹è€Œå¯¼è‡´è¿ç®—ç¬¦æ–¹æ³•æ— æ³•è¿”å›æœ‰æ•ˆçš„ç»“æœåº”è¯¥è¿”å›è¿™ä¸ªå€¼ï¼Œè€Œä¸æ˜¯æŠ›å‡ºTypeErrorã€‚è¿”å›è¯¥å€¼æ—¶å¦ä¸€ä¸ªæ“ä½œæ•°æ‰€å±çš„ç±»å‹è¿˜æœ‰æœºä¼šæ‰§è¡Œè®¡ç®—ã€‚

NotImplementedErroræ˜¯ä¸€ç§å¼‚å¸¸ï¼ŒæŠ½è±¡ç±»ä¸­çš„å ä½æ–¹æ³•æŠŠå®ƒæŠ›å‡ºï¼Œæé†’å­ç±»å¿…é¡»è¦†ç›–ã€‚



### ä¸­ç¼€è¿ç®—ç¬¦

åˆ†åˆ«ä¸ºæ­£å‘æ–¹æ³•ï¼Œåå‘æ–¹æ³•ï¼Œå°±åœ°æ–¹æ³•


[![A1AB23E0-22C0-4889-A197-5BC67F1065B5.png](https://i.loli.net/2017/12/12/5a2f8e6d17f1f.png)](https://i.loli.net/2017/12/12/5a2f8e6d17f1f.png)

### æ¯”è¾ƒè¿ç®—ç¬¦

åˆ†åˆ«ä¸ºæ­£å‘è°ƒç”¨ï¼Œåå‘è°ƒç”¨ä¸åå¤‡æœºåˆ¶

[![858C9E17-9F55-4B76-B2CC-F247B006E890.png](https://i.loli.net/2017/12/12/5a2f8ff6bd68f.png)](https://i.loli.net/2017/12/12/5a2f8ff6bd68f.png)

### å¢é‡èµ‹å€¼è¿ç®—ç¬¦

å¯¹äºå®ç°äº†å¢é‡èµ‹å€¼è¿ç®—ç¬¦ï¼ˆå¦‚\_\_iadd\_\_,\_\_mul\_\_ï¼‰çš„ç±»ï¼Œå¦‚è®¡ç®—a+=bæ—¶å°±ä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼ˆå½“ç„¶ä¸å®ç°å¢é‡èµ‹å€¼è¿ç®—ç¬¦æ–¹æ³•ä¹Ÿè¡Œï¼Œå³ä¼šç­‰ä»·äº a += bï¼‰

ä¸ + ç›¸æ¯”ï¼Œ+= è¿ç®—ç¬¦å¯¹ç¬¬äºŒä¸ªæ“ä½œæ•°æ›´å®½å®¹ã€‚+ è¿ç®—ç¬¦çš„ä¸¤ä¸ªæ“ä½œæ•°ä¸€èˆ¬æ˜¯è¦æ±‚å¿…é¡»æ˜¯åŒç±»å‹ï¼Œå¦åˆ™ç»“æœçš„ç±»å‹ä¼šæ¯”è¾ƒæ··ä¹±ã€‚è€Œ += æƒ…å†µæ¯”è¾ƒæ˜ç¡®ï¼Œå› ä¸ºå°±åœ°ä¿®æ”¹å·¦æ“ä½œæ•°ï¼Œæ‰€ä»¥ç±»å‹çš„æœ€ç»ˆç»“æœæ˜¯ç¡®å®šçš„ã€‚

ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä¸­ç¼€è¿ç®—ç¬¦çš„æ­£å‘æ–¹æ³•åªå¤„ç†ä¸selfå±äºåŒä¸€ç±»å‹çš„æ“ä½œæ•°ï¼Œé‚£å°±æ— éœ€å®ç°å¯¹åº”çš„åå‘æ–¹æ³•ï¼Œå› ä¸ºæŒ‰ç…§å®šä¹‰ï¼Œåå‘æ–¹æ³•æ˜¯ä¸ºäº†å¤„ç†ç±»å‹ä¸åŒçš„æ“ä½œæ•°ã€‚
